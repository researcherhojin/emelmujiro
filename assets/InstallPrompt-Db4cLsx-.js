import{j as e,X as I,d as S,O as E,Q as P}from"./ui-vendor-B8I1SmuU.js";import{r as l}from"./react-vendor-BPZHHc88.js";import{l as D}from"./index-D7wojeWw.js";import"./i18n-C_xjgTvF.js";const B=({onInstall:t,onDismiss:o,className:f=""})=>{const[r,i]=l.useState(null),[h,a]=l.useState(!1),[d,c]=l.useState(!1),[m,g]=l.useState("desktop");l.useEffect(()=>{const s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);g(s?"mobile":"desktop");const p=b=>{b.preventDefault(),i(b);const n=localStorage.getItem("install-prompt-dismissed"),N=n?parseInt(n):0,k=(Date.now()-N)/(1e3*60*60*24);(!n||k>7)&&a(!0)},u=()=>{a(!1),i(null),t&&t()};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",u),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",u)}},[t]);const j=async()=>{if(r){c(!0);try{await r.prompt();const{outcome:s}=await r.userChoice;s==="accepted"?(localStorage.setItem("pwa-install-accepted","true"),a(!1),t&&t()):x(),i(null)}catch(s){D.error("Error during installation:",s)}finally{c(!1)}}},x=()=>{localStorage.setItem("install-prompt-dismissed",Date.now().toString()),a(!1),o&&o()},w=()=>{const s=Date.now()+864e5;localStorage.setItem("install-prompt-dismissed",s.toString()),a(!1)};if(!h||!r)return null;const v=m==="mobile"?e.jsx(E,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}):e.jsx(P,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),y=m==="mobile"?"홈 화면":"데스크톱";return e.jsx("div",{className:`fixed bottom-4 left-4 z-50 bg-white dark:bg-gray-800 rounded-lg shadow-xl
                     p-6 max-w-sm border border-gray-200 dark:border-gray-700
                     animate-slide-up ${f}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:v})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"앱 설치하기"}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 ml-2","aria-label":"닫기",children:e.jsx(I,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-4",children:["에멜무지로를 ",y,"에 설치하여 더 빠르고 편리하게 이용하세요. 오프라인에서도 사용할 수 있습니다."]}),e.jsx("div",{className:"mb-4",children:e.jsxs("ul",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),e.jsx("span",{children:"빠른 실행"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),e.jsx("span",{children:"오프라인 사용"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),e.jsx("span",{children:"푸시 알림"})]})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:j,disabled:d,className:`flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400
                         text-white py-2 px-3 rounded text-xs font-medium
                         transition-colors duration-200 disabled:cursor-not-allowed
                         flex items-center justify-center space-x-1`,children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{children:d?"설치 중...":"설치"})]}),e.jsx("button",{onClick:w,className:`px-3 py-2 text-xs text-gray-600 dark:text-gray-300
                         hover:text-gray-800 dark:hover:text-gray-100
                         transition-colors duration-200`,children:"나중에"})]})]})]})})};export{B as default};
//# sourceMappingURL=InstallPrompt-Db4cLsx-.js.map
