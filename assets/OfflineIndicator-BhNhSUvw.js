import{j as e,W as v,J as w,h as p,R as b}from"./ui-vendor-B8I1SmuU.js";import{r as c}from"./react-vendor-BPZHHc88.js";const N=c.memo(()=>{const[d,t]=c.useState({isOnline:navigator.onLine,syncStatus:"idle",pendingRequests:0}),[m,n]=c.useState(!navigator.onLine);c.useEffect(()=>{const r=()=>{t(s=>({...s,isOnline:!0,syncStatus:"syncing"})),n(!0),setTimeout(()=>{t(s=>({...s,syncStatus:"success",pendingRequests:0})),setTimeout(()=>{t(s=>({...s,syncStatus:"idle"})),n(!1)},2e3)},1500)},o=()=>{t(s=>({...s,isOnline:!1,syncStatus:"idle",pendingRequests:s.pendingRequests+1})),n(!0)},l=s=>{const{type:x,data:u}=s.data||{};switch(x){case"NETWORK_STATUS":u?.online?r():o();break;case"SYNC_STATUS":t(a=>({...a,syncStatus:u?.status||"idle",pendingRequests:u?.pendingCount||0}));break;case"BACKGROUND_SYNC_COMPLETE":t(a=>({...a,syncStatus:"success",pendingRequests:Math.max(0,a.pendingRequests-1)})),setTimeout(()=>{t(a=>({...a,syncStatus:"idle"}))},2e3);break}};return window.addEventListener("online",r),window.addEventListener("offline",o),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener&&navigator.serviceWorker.addEventListener("message",l),navigator.onLine||(t(s=>({...s,isOnline:!1})),n(!0)),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",o),"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener&&navigator.serviceWorker.removeEventListener("message",l)}},[]);const h=()=>{window.location.reload()},f=()=>{n(!1)},g=()=>{const{isOnline:r,syncStatus:o,pendingRequests:l}=d;if(!r)return{icon:e.jsx(v,{className:"w-4 h-4"}),title:"오프라인 상태",message:l>0?`${l}개 요청이 대기 중입니다`:"일부 기능이 제한될 수 있습니다",bgColor:"bg-red-500",showActions:!0};switch(o){case"syncing":return{icon:e.jsx(b,{className:"w-4 h-4 animate-spin"}),title:"동기화 중",message:"데이터를 업데이트하고 있습니다...",bgColor:"bg-blue-500",showActions:!1};case"success":return{icon:e.jsx(p,{className:"w-4 h-4"}),title:"온라인 연결됨",message:"모든 기능을 사용할 수 있습니다",bgColor:"bg-green-500",showActions:!1};case"error":return{icon:e.jsx(w,{className:"w-4 h-4"}),title:"동기화 오류",message:"일부 데이터 동기화에 실패했습니다",bgColor:"bg-orange-500",showActions:!0};default:return null}};if(!m)return null;const i=g();return i?e.jsxs("div",{className:`fixed top-4 right-4 z-50 ${i.bgColor} text-white rounded-lg shadow-lg
                  p-4 max-w-sm transition-all duration-300 animate-fade-in`,role:"alert","aria-live":"polite","aria-atomic":"true",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold",children:i.title}),e.jsx("div",{className:"text-xs opacity-90 mt-1",children:i.message}),d.syncStatus==="syncing"&&e.jsx("div",{className:"mt-2 h-1 bg-white/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-1000 animate-pulse",style:{width:"75%"}})})]}),e.jsx("button",{onClick:f,className:"flex-shrink-0 text-white/70 hover:text-white transition-colors","aria-label":"알림 닫기",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i.showActions&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/20 flex space-x-2",children:[e.jsx("button",{onClick:h,className:`flex-1 bg-white/10 hover:bg-white/20 text-xs py-2 px-3 rounded
                       transition-colors duration-200 font-medium`,"aria-label":"연결 상태 다시 확인",children:"다시 시도"}),!d.isOnline&&e.jsx("button",{onClick:()=>n(!1),className:`bg-white/10 hover:bg-white/20 text-xs py-2 px-3 rounded
                         transition-colors duration-200`,"aria-label":"알림 숨기기",children:"숨기기"})]})]}):null});N.displayName="OfflineIndicator";export{N as default};
//# sourceMappingURL=OfflineIndicator-BhNhSUvw.js.map
