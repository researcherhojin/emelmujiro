import{j as e,X as s,d as t,O as a,Q as l}from"./ui-vendor-dPCV3Ya0.js";import{r}from"./react-vendor-CcblIELh.js";import{l as n}from"./index-BM4l87xM.js";import"./i18n-BLYQbxJl.js";const i=({onInstall:i,onDismiss:d,className:o=""})=>{const[c,x]=r.useState(null),[m,u]=r.useState(!1),[p,b]=r.useState(!1),[h,g]=r.useState("desktop");r.useEffect(()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);g(e?"mobile":"desktop");const s=e=>{e.preventDefault();x(e);const s=localStorage.getItem("install-prompt-dismissed"),t=s?parseInt(s):0,a=(Date.now()-t)/864e5;(!s||a>7)&&u(!0)},t=()=>{u(!1),x(null),i&&i()};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",t)}},[i]);const j=()=>{localStorage.setItem("install-prompt-dismissed",Date.now().toString()),u(!1),d&&d()};if(!m||!c)return null;const f="mobile"===h?e.jsx(a,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}):e.jsx(l,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),w="mobile"===h?"홈 화면":"데스크톱";return e.jsx("div",{className:`fixed bottom-4 left-4 z-50 bg-white dark:bg-gray-800 rounded-lg shadow-xl\n                     p-6 max-w-sm border border-gray-200 dark:border-gray-700\n                     animate-slide-up ${o}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:f})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"앱 설치하기"}),e.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 ml-2","aria-label":"닫기",children:e.jsx(s,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-4",children:["에멜무지로를 ",w,"에 설치하여 더 빠르고 편리하게 이용하세요. 오프라인에서도 사용할 수 있습니다."]}),e.jsx("div",{className:"mb-4",children:e.jsxs("ul",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),e.jsx("span",{children:"빠른 실행"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),e.jsx("span",{children:"오프라인 사용"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),e.jsx("span",{children:"푸시 알림"})]})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:async()=>{if(c){b(!0);try{await c.prompt();const{outcome:e}=await c.userChoice;"accepted"===e?(localStorage.setItem("pwa-install-accepted","true"),u(!1),i&&i()):j(),x(null)}catch(e){n.error("Error during installation:",e)}finally{b(!1)}}},disabled:p,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400\n                         text-white py-2 px-3 rounded text-xs font-medium\n                         transition-colors duration-200 disabled:cursor-not-allowed\n                         flex items-center justify-center space-x-1",children:[e.jsx(t,{className:"w-3 h-3"}),e.jsx("span",{children:p?"설치 중...":"설치"})]}),e.jsx("button",{onClick:()=>{const e=Date.now()+864e5;localStorage.setItem("install-prompt-dismissed",e.toString()),u(!1)},className:"px-3 py-2 text-xs text-gray-600 dark:text-gray-300\n                         hover:text-gray-800 dark:hover:text-gray-100\n                         transition-colors duration-200",children:"나중에"})]})]})]})})};export{i as default};
