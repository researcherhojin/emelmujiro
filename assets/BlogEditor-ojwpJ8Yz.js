import{j as e,y as t,d as s,X as l,z as a,F as r}from"./ui-vendor-dPCV3Ya0.js";import{u as n,r as o}from"./react-vendor-CcblIELh.js";import{l as c}from"./index-BP7P1ltd.js";import{M as i,r as d}from"./index-D785QN43.js";import"./i18n-BLYQbxJl.js";const m=()=>{const m=n(),[x,u]=o.useState(!1),[g,p]=o.useState(!1),[h,b]=o.useState({title:"",excerpt:"",content:"",category:"",tags:"",author:"이호진",image_url:""});o.useEffect(()=>{const e="true"===localStorage.getItem("adminMode");u(e);"true"===new URLSearchParams(window.location.search).get("admin")&&(localStorage.setItem("adminMode","true"),u(!0))},[]);const j=e=>{const{name:t,value:s}=e.target;b(e=>({...e,[t]:s}))};return x?e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"블로그 글쓰기"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("label",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 cursor-pointer flex items-center",children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),"JSON 가져오기",e.jsx("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=e=>{try{const t=e.target?.result;if("string"!=typeof t)throw new Error("Invalid file content");const s=JSON.parse(t);if(!Array.isArray(s))throw new Error("Invalid JSON format: expected array");const l=localStorage.getItem("customBlogPosts"),a=l?JSON.parse(l):[],r=[...s,...a].filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id));localStorage.setItem("customBlogPosts",JSON.stringify(r)),alert(`${s.length}개의 포스트를 가져왔습니다!`)}catch{alert("파일을 읽는 중 오류가 발생했습니다.")}},s.readAsText(t)},className:"hidden"})]}),e.jsxs("button",{onClick:()=>{try{const e=localStorage.getItem("customBlogPosts"),t=e?JSON.parse(e):[],s=JSON.stringify(t,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(s),a=`blog-posts-${(new Date).toISOString().split("T")[0]}.json`,r=document.createElement("a");r.setAttribute("href",l),r.setAttribute("download",a),r.click()}catch(e){c.error("Failed to export posts:",e),alert("포스트 내보내기 중 오류가 발생했습니다.")}},className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 flex items-center",children:[e.jsx(s,{className:"w-4 h-4 mr-2"}),"JSON 내보내기"]}),e.jsxs("button",{onClick:()=>m("/blog"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 flex items-center",children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"취소"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"편집기"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"제목 *"}),e.jsx("input",{type:"text",name:"title",value:h.title,onChange:j,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"포스트 제목을 입력하세요"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"요약"}),e.jsx("input",{type:"text",name:"excerpt",value:h.excerpt,onChange:j,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"간단한 요약 (비워두면 자동 생성)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"카테고리"}),e.jsxs("select",{name:"category",value:h.category,onChange:j,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"선택하세요"}),["AI","웹개발","프론트엔드","DevOps","교육","프로그래밍","일반"].map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"작성자"}),e.jsx("input",{type:"text",name:"author",value:h.author,onChange:j,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"태그 (쉼표로 구분)"}),e.jsx("input",{type:"text",name:"tags",value:h.tags,onChange:j,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"React, TypeScript, 웹개발"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"이미지 URL"}),e.jsx("input",{type:"text",name:"image_url",value:h.image_url,onChange:j,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg (비워두면 자동 생성)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"내용 * (Markdown 지원)"}),e.jsx("textarea",{name:"content",value:h.content,onChange:j,rows:15,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"## 제목\n\n내용을 작성하세요...\n\n- 리스트 항목\n- **굵은 글씨**\n- *기울임*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{if(h.title&&h.content)try{const e={id:Date.now(),title:h.title,slug:h.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),excerpt:h.excerpt||h.content.substring(0,150)+"...",content:h.content,author:h.author,publishedAt:(new Date).toISOString().split("T")[0],category:h.category||"일반",tags:h.tags?h.tags.split(",").map(e=>e.trim()):[],image_url:h.image_url||`https://source.unsplash.com/800x400/?${h.category||"technology"}`,date:(new Date).toISOString().split("T")[0],created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),published:!0},t=localStorage.getItem("customBlogPosts"),s=[e,...t?JSON.parse(t):[]];localStorage.setItem("customBlogPosts",JSON.stringify(s)),alert("포스트가 저장되었습니다!"),b({title:"",excerpt:"",content:"",category:"",tags:"",author:"이호진",image_url:""}),m("/blog")}catch(e){c.error("Failed to save post:",e),alert("포스트 저장 중 오류가 발생했습니다.")}else alert("제목과 내용은 필수입니다.")},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center justify-center",children:[e.jsx(a,{className:"w-4 h-4 mr-2"}),"저장"]}),e.jsxs("button",{onClick:()=>p(!g),className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 flex items-center justify-center",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),g?"편집기":"미리보기"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"미리보기"}),e.jsxs("article",{className:"prose prose-indigo max-w-none",children:[h.image_url&&e.jsx("img",{src:h.image_url,alt:h.title,className:"w-full h-48 object-cover rounded-lg mb-4"}),h.category&&e.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-full mb-2",children:h.category}),e.jsx("h1",{children:h.title||"제목을 입력하세요"}),h.tags&&e.jsx("div",{className:"flex gap-2 mb-4",children:h.tags.split(",").map((t,s)=>e.jsxs("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:["#",t.trim()]},s))}),h.excerpt&&e.jsx("p",{className:"text-gray-600 italic",children:h.excerpt}),e.jsx(i,{remarkPlugins:[d],children:h.content||"*내용을 입력하세요...*"})]})]})]}),e.jsxs("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-yellow-800 mb-2",children:"📝 사용 방법"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• 작성한 글은 브라우저의 localStorage에 저장됩니다"}),e.jsx("li",{children:"• JSON 내보내기로 포스트를 백업할 수 있습니다"}),e.jsx("li",{children:"• JSON 파일을 수정하여 대량의 포스트를 추가할 수 있습니다"}),e.jsxs("li",{children:["• 실제 배포 시에는"," ",e.jsx("code",{className:"bg-yellow-100 px-1",children:"blogPosts.js"})," 파일에 직접 추가하는 것을 추천합니다"]}),e.jsx("li",{children:"• Markdown 문법을 사용하여 풍부한 콘텐츠를 작성할 수 있습니다"})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 pt-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"관리자 모드가 필요합니다"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"블로그 글을 작성하려면 관리자 권한이 필요합니다."}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-md mx-auto",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["관리자 모드를 활성화하려면 URL에"," ",e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"?admin=true"}),"를 추가하세요."]}),e.jsx("button",{onClick:()=>{window.location.href=window.location.pathname+"?admin=true"},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"관리자 모드 활성화"})]})]})})};export{m as default};
